<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search</title>

    <link rel="stylesheet" type="text/css" href="/CSS/Search.css">

    <script src="/javascripts/Search.js"></script>
    <script src="app.js"></script>
</head>


<body class="body">
<form action="/searchtrains" method="post">
    <div class="container maindiv">

       <div class="fromdivsearch">
           <label for="fromsearch" id="fromlabel">From</label>
           <input type="text" id="fromsearch" name="from" placeholder="Select Station/City Name" value="<%= from %>">
       </div>

       
           <img src="IMAGES/Swap.jpg" id="swapimage" onclick="swap()">

       <div class="todivsearch">
           <label for="tosearch" id="tolabel">To</label>
           <input type="text" id="tosearch" name="to" placeholder="Select Station/City Name" value="<%= to%>">
       </div>

       <div class="datedivsearch">
           <label for="datesearch" id="datelabel">Date</label>
           <input type="date" id="datesearch" name="date" value="<%=date%>">
       </div>

       <div class="updatebutton">
           <button type="submit" id="update">Update Search</button> 
       </div>

    </div>
</form>


    <div class="mainbox">
        <div class="container filters">
            <div class="filterdiv">
                <h2 id="h2">Filters</h2>
                
                <div class="clearall">
                    <p id="clearbutton" onclick="clearall()">Clear All</p>
                </div>
            </div>
    
            <br>
    
            <div class="quick">
                 <details class="details" open>
                     <summary>Quick Filters</summary><br>
                     <input type="checkbox" id="aconly" name="aconly">
                     <label for="aconly">AC Only</label><br>
    
                     <input type="checkbox" id="availableonly" name="availableonly">
                     <label for="availableonly">NON-AC</label><br>
    
                     <!-- <input type="checkbox" id="aftersix" name="aftersix">
                     <label for="aftersix">Train Depart(After 6pm)</label> -->
                 </details>
    
                 <div class="reset">
                    <button type="reset" id="resetbutton" value="reset" onclick="quick()">Reset</button>
                 </div>
            </div>
    
            <div class="line"></div>
    
            <div class="quota">
                <details class="details" open>
                    <summary>Quota</summary><br>
                    <input type="radio" id="general" name="quota">
                    <label for="general">General</label><br>
    
                    <input type="radio" id="ladies" name="quota">
                    <label for="ladies">Ladies</label><br>
    
                    <input type="radio" id="tatkal" name="quota">
                    <label for="tatkal">Tatkal</label>
                </details>
    
                <div class="reset">
                    <button type="reset" id="resetbutton" value="reset" onclick="quota()">Reset</button>
                </div>
           </div>
    
           <div class="line"></div>
    
           <div class="class1">
                <details class="details" open>
                    <summary>Class</summary><br>
                    <input type="checkbox" id="1a" name="1a">
                    <label for="1a">1A</label><br>
    
                    <input type="checkbox" id="2a" name="2a">
                    <label for="2a">2A</label><br>
    
                    <input type="checkbox" id="3a" name="3a">
                    <label for="3a">3A</label><br>
    
                    <input type="checkbox" id="sl" name="sl">
                    <label for="sl">SL</label><br>
    
                    <input type="checkbox" id="2s" name="2s">
                    <label for="2s">2S</label>    
                </details>
    
                <div class="reset">
                    <button type="reset" id="resetbutton" value="reset" onclick="class1()">Reset</button>
                </div>
            </div>
    
            <div class="line"></div>
    
            <div class="departure">
                <details class="details" open>
                    <summary>Departure Time</summary><br>
                    <input type="checkbox" id="morning" name="morning">
                    <label for="morning">Morning( 12AM - 11AM)</label><br>
        
                    <input type="checkbox" id="afternoon" name="afternoon">
                    <label for="afternoon">Afternoon( 11AM - 6PM)</label><br>
        
                    <input type="checkbox" id="evening" name="evening">
                    <label for="evening">Evening(6PM - 9PM)</label><br>
        
                    <input type="checkbox" id="night" name="night">
                    <label for="night">Night(9PM - 12AM)</label>  
                </details>
        
                <div class="reset">
                    <button type="reset" id="resetbutton" value="reset" onclick="departure()">Reset</button>
                </div>
            </div>
    
            <div class="line"></div>
    
            <div class="arrival">
                <details class="details" open>
                    <summary>Arrival Time</summary><br>
                    <input type="checkbox" id="morning" name="morning">
                    <label for="morning">Morning( 12AM - 11AM)</label><br>
        
                    <input type="checkbox" id="afternoon" name="afternoon">
                    <label for="afternoon">Afternoon( 11AM - 6PM)</label><br>
        
                    <input type="checkbox" id="evening" name="evening">
                    <label for="evening">Evening(6PM - 9PM)</label><br>
        
                    <input type="checkbox" id="night" name="night">
                    <label for="night">Night(9PM - 12AM)</label>  
                </details>
        
                <div class="reset">
                    <button type="reset" id="resetbutton" value="reset" onclick="arrival()">Reset</button>
                </div>
            </div>
    
            <div class="line"></div>
    
            <div class="departurestation">
                <details class="details" open>
                    <summary>Departure Station</summary><br>
                </details>
        
                <div class="reset">
                   <button type="reset" id="resetbutton" value="reset">Reset</button>
                </div>
            </div>
    
            <div class="line"></div>
    
            <div class="arrivalstation">
                <details class="details" open>
                    <summary>Arrival Station</summary><br>
                </details>
        
                <div class="lastreset">
                    <button type="reset" id="resetbutton" value="reset">Reset</button>
                </div>
            </div>
        </div>


        <div class="trainsdiv">
            <div class="container sorting">
                <p id="sortby">Sort By:</p>
                    
                <a href="/sort"><button type="submit" id="fastest" value="submit" >TrainName</button></a>
                <button type="submit" id="arrivaltime" value="submit">Arrival Time</button>
                <button type="submit" id="departuretime" value="submit">Departure Time</button>
                <button type="submit" id="availability" value="submit">Availability</button>
               
            </div>

         
           <% if(cont.length>0){%>
            <% for(let i of cont){ %>
                 
                
                <div class="train1 card">
                    <p id="nearbystation">Nearby Station</p>
                    <!-- <h2 id="trainname">12345 - XYZ Express</h2> -->
                   
                       
            
                    
                    <h2 id="trainname"><%=  i.trainname %></h2>
                    
                    
                    <p id="weeks">Runs on - <b><%= i.weekdays %></b> &nbsp;|&nbsp; </p>
                    <p id="ac"><b><%= i.ac %></b></p>
                    
                    <div class="date">
                        <div class="sourcetime">
                           
                             <p><b> <%= i.date_start %></b></p>
                             <p><b><%= i.time_start %></b></p>
                             <p class="sd"><%= i.source %></p>
                        </div>
            
                        <div class="destinationtime">
                            
                             <p><b> <%= i.date_dest %></b></p>
                             <p><b><%= i.time_dest %></b></p>
                             <p class="sd"><%= i.destination %></p>
                        </div>
                    </div>
            
                  
                  <div class="tickets card">
                  
            
               
            <a href="payment" class="anchor">
                  <div class="ticket2 card">
                    <div class="toprow">
                        <p class="trainclass"><b>Class:</b><%= i.array[0].type0 %></p>
                        <p class="ticketsavailable"><b>Available:</b><%= i.array[0].availability0 %></p>
                    </div>
                

                
                    <div class="category">
                        
                        <p class="cost">Cost:<%= i.array[0].price0 %></p>
                    </div>
                
                    <p class="cancel"> <a href="#"> Free Cancellation</a> </p>
                </div>
            </a>

            <a href="payment" class="anchor">
                <div class="ticket2 card">
                    <div class="toprow">
                        <p class="trainclass"><b>Class:</b><%= i.array[1].type1 %></p>
                        <p class="ticketsavailable"><b>Available:</b><%= i.array[1].availability1 %></p>
                    </div>
                
                    <div class="category">
                      
                        <p class="cost">Cost:<%= i.array[1].price1 %></p>
                    </div>
                
                    <p class="cancel"> <a href="#"> Free Cancellation</a> </p>
                </div>
            </a>
            <a href="payment" class="anchor">
                <div class="ticket2 card">
                    <div class="toprow">
                        <p class="trainclass"><b>Class:</b><%= i.array[2].type2 %></p>
                        <p class="ticketsavailable"><b>Available:</b><%= i.array[2].availability2 %></p>
                    </div>
              
                    <div class="category">
                     
                        <p class="cost">Cost:<%= i.array[2].price2 %></p>
                    </div>
                
                    <p class="cancel"> <a href="#"> Free Cancellation</a> </p>
                </div>
            </a> 
            <a href="payment" class="anchor">     
                <div class="ticket2 card">
                    <div class="toprow">
                        <p class="trainclass"><b>Class:</b><%= i.array[3].type3 %></p>
                        <p class="ticketsavailable"><b>Available:</b><%= i.array[3].availability3 %></p>
                    </div>
                
                    <div class="category">
                     
                        <p class="cost">Cost:<%= i.array[3].price3 %></p>
                    </div>
                
                    <p class="cancel"> <a href="#"> Free Cancellation</a> </p>
                </div>
            </a>
              
               
            
             </div>
                
            
            
            
                
                </div> 
                
            
            
            
                <% } %>
                <%} else {%>
                  <h1>OOPS! NOT FOUND WITH REQUIRED VALUES</h1>

                    <%}%>


          
        </div>


    </div>

</body>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</html>